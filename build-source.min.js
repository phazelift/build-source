(function(){"use strict";var t,r,n,s,o,a,e,i=[].slice,u=[].indexOf||function(t){for(var r=0,n=this.length;n>r;r++)if(r in this&&this[r]===t)return r;return-1};s=require("gulp"),e=r=require("words.js"),t=r.Strings,o=function(r,n){return""!==e.forceString(n)&&(r=e.flexArgs(r),r=r.map(function(r){return t.startsWith(r,a.noRoot)?t.removePos(r,1):n+r})),r},a=function(t){return t?s.src(o(t,a.root)):void 0},a.root="",a.noRoot="^",a.watchable=function(t){return!(n.tasks.ignored(t)||"watch"===t)},a.watcher={},a.watch=function(t){var r,n,e;e=[];for(n in t)r=t[n],e.push(a.watchable(r)?a.watcher[n]=s.watch(o(n,a.root),r):void 0);return e},a.watchAll=function(){var t,r,s,o;s={},o=n.task;for(t in o)r=o[t],r.src&&(null!=s[r.src]?s[r.src].push(t):s[r.src]=[t]);return a.watch(s)},n=function(t){return function(r,o){var u,c,l,f,h,k;if(c=a(r),null!=o)for(f=0,h=o.length;h>f;f++)l=o[f],l&&(e.notFunction(l)?(k=l,l=k[0],u=2<=k.length?i.call(k,1):[],c=c.pipe(l.apply(this,u))):c=c.pipe(l()));return"!"!==t?c.pipe(s.dest(n.root+t)):void 0}},n.root="",n.task={},n.tasks=function(t){var r,o,a;a=[];for(r in t)o=t[r],a.push(function(t,r){var o,a,u;return e.isFunction(r)?(n.task[t]=r,s.task(t,r)):e.isArray(r)&&(u=r[0],o=r[1],a=3<=r.length?i.call(r,2):[],n.task[t]=function(){return n(o)(u,a)},n.task[t].src=u,n.task[t].dest=o,n.task[t].plugs=a,s.task(t,n.task[t])),n.tasks.all.push(t)}(r,o));return a},n.tasks.all=[],n.tasks.ignore=[],n.tasks.ignored=function(t){return u.call(n.tasks.ignore,t)>=0||"default"===t},n.tasks.startAll=function(){var t,r,o,a,e;for(r=[],e=n.tasks.all,o=0,a=e.length;a>o;o++)t=e[o],n.tasks.ignored(t)||r.push(t);return s.start(r)},n.source=a,module.exports=[n,a]}).call(this);